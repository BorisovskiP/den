version: "3.5"

x-volumes: &volumes
  - .${WARDEN_WEB_ROOT:-}/public/media:/var/www/html/public/media:delegated
  - appdata:/var/www/html

x-environment: &environment
  - CHOWN_DIR_LIST=public/media

services:
  nginx:
    environment:
      - XDEBUG_CONNECT_BACK_HOST=${XDEBUG_CONNECT_BACK_HOST:-host.docker.internal}
    volumes: *volumes

  php-fpm:
    volumes: *volumes
    environment: *environment
  php-debug:
    volumes: *volumes
    environment: *environment

volumes:
  appdata:
